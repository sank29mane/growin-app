---
phase: 18-adversarial-alpha
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [backend/agents/research_agent.py, backend/agents/whale_agent.py]
autonomous: true
requirements: [ADV-01, ADV-03]
user_setup:
  - service: SEC EDGAR
    why: "Fetching 13F institutional holdings"
    dashboard_config:
      - task: "Ensure SEC user-agent string is configured"
        location: "backend/agents/whale_agent.py"

must_haves:
  truths:
    - "ResearchAgent identifies LSE RNS or SEC regulatory sentiment"
    - "WhaleAgent provides 13F institutional holdings data"
  artifacts:
    - path: "backend/agents/research_agent.py"
      provides: "LSE/SEC regulatory news sentiment"
    - path: "backend/agents/whale_agent.py"
      provides: "SEC EDGAR 13F holdings integration"
  key_links:
    - from: "ResearchAgent"
      to: "LSE RNS / SEC News"
      via: "HTTP request to regulatory feeds"
    - from: "WhaleAgent"
      to: "SEC EDGAR"
      via: "Institutional 13F fetching logic"
---

<objective>
Enhance Research and Whale agents with verified institutional intelligence data from regulatory sources (LSE RNS and SEC EDGAR).

Purpose: Move beyond social sentiment to hard regulatory filings for institutional alpha.
Output: Integrated LSE/SEC news in ResearchAgent and 13F holdings in WhaleAgent.
</objective>

<execution_context>
@/Users/sanketmane/.gemini/get-shit-done/workflows/execute-plan.md
@/Users/sanketmane/.gemini/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@backend/agents/research_agent.py
@backend/agents/whale_agent.py
@.gsd/RESEARCH_PHASE_18.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: ResearchAgent LSE/SEC News Integration</name>
  <files>backend/agents/research_agent.py</files>
  <action>
    Modify ResearchAgent.analyze to include specialized fetching of regulatory news:
    - Implement a new method _fetch_regulatory_news() that targets LSE RNS (Regulatory News Service) via NewsData.io or RSS feeds.
    - Add SEC regulatory sentiment using SEC-specific search queries in Tavily or NewsAPI.
    - Ensure VADER sentiment analysis weights these regulatory sources higher than social/generic sources.
  </action>
  <verify>
    Run `pytest backend/tests/test_research_agent.py` or a manual test script to confirm RNS/SEC news appears in results for tickers like "BP.L" or "TSLA".
  </verify>
  <done>
    ResearchAgent returns sentiment scores and headlines that include regulatory sources.
  </done>
</task>

<task type="auto">
  <name>Task 2: WhaleAgent 13F Institutional Holdings (EDGAR)</name>
  <files>backend/agents/whale_agent.py</files>
  <action>
    Enhance WhaleAgent to fetch institutional holdings:
    - Implement SEC EDGAR 13F scraping or API integration (using a library like 'python-edgar' or direct HTTP requests to SEC.gov with a compliant User-Agent).
    - Map tickers to CIKs (Central Index Keys) to find recent 13F filings.
    - Extract top 5 institutional owners and their current position size change.
    - Integrate this data into the WhaleData model returned by WhaleAgent.
  </action>
  <verify>
    Run a test script for WhaleAgent with ticker 'AAPL' and verify 'institutional_holdings' or '13f_data' is present in the response.
  </verify>
  <done>
    WhaleAgent provides quarterly 13F data for high-conviction holdings.
  </done>
</task>

</tasks>

<verification>
Check ResearchAgent and WhaleAgent logs for successful regulatory/institutional data retrieval.
</verification>

<success_criteria>
Verified news sentiment and 13F holdings are part of the agent's context and can be seen in reasoning traces.
</success_criteria>

<output>
After completion, create `.planning/phases/18-adversarial-alpha/18-01-SUMMARY.md`
</output>
