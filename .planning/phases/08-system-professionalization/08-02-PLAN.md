---
phase: 08-system-professionalization
plan: 02
type: execute
wave: 2
depends_on: ["08-01"]
files_modified: ["backend/routes/chat_routes.py", "backend/agents/messenger.py"]
autonomous: true
requirements: [PROF-02]
---

<objective>
Implement full SSE streaming support with integrated agent telemetry.
</objective>

<tasks>

<task type="auto">
  <name>Task 1: Enhance SSE Generator</name>
  <action>
    Update `stream_chat_generator` in `chat_routes.py`:
    - Ensure it yields metadata events for `request_id`.
    - Properly handle `telemetry` events from the messenger.
    - Ensure it can handle stream chunks from `DecisionAgent`.
  </action>
</task>

<task type="auto">
  <name>Task 2: Integrate Agent Telemetry</name>
  <action>
    Ensure all specialist agents emit `agent_started` and `agent_complete` messages via `Messenger`.
    Verify that these messages include the `correlation_id` (request_id).
  </action>
</task>

</tasks>

<verification>
- Use `curl` with `Accept: text/event-stream` to verify the stream contains both tokens and telemetry events.
</verification>
